.PHONY: client server test_client test_server matmul matmul-native

client:
	g++ -O2 -std=c++17 -arch arm64 -fno-exceptions -fno-rtti -I ../dawn/out/Release/gen/include -I ../dawn/include/ ../dawn/out/Release/src/dawn/wire/libdawn_wire.a ../dawn/out/Release/src/dawn/common/libdawn_common.a ../dawn/out/Release/src/dawn/libdawn_proc.a command_buffer.cpp client_tcp.cpp client.cpp -o client

matmul:
	g++ -O2 -std=c++17 -arch arm64 -fno-exceptions -fno-rtti -I ../dawn/out/Release/gen/include -I ../dawn/include/ ../dawn/out/Release/src/dawn/wire/libdawn_wire.a ../dawn/out/Release/src/dawn/common/libdawn_common.a ../dawn/out/Release/src/dawn/libdawn_proc.a command_buffer.cpp client_tcp.cpp matmul.cpp -o matmul

matmul-native:
	g++ -O2 -std=c++17 -arch arm64 -fno-exceptions -fno-rtti -I ../dawn/out/Release/gen/include -I ../dawn/include/ ../dawn/out/Release/src/dawn/libdawn_proc.a ../dawn/out/Release/src/dawn/libdawncpp.a ../dawn/out/Release/src/dawn/libdawncpp_headers.a ../dawn/out/Release/src/dawn/libdawn_headers.a ../dawn/out/Release/src/dawn/wire/libdawn_wire.a ../dawn/out/Release/src/dawn/common/libdawn_common.a ../dawn/out/Release/src/dawn/native/libdawn_native.a ../dawn/out/Release/src/dawn/platform/libdawn_platform.a ../dawn/out/Release/src/dawn/libdawn_proc.a ../dawn/out/Release/src/tint/libtint_api.a ../dawn/out/Release/src/tint/libtint_lang_hlsl_writer_common.a ../dawn/out/Release/src/tint/libtint_lang_spirv_reader_common.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_reader.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_reader_parser.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_writer.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_writer_ast_printer.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_writer_syntax_tree_printer.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer_raise.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_reader_program_to_ir.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer_ast_printer.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_helpers.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_ast_transform.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_resolver.a ../dawn/out/Release/src/tint/libtint_lang_core_intrinsic_data.a ../dawn/out/Release/src/tint/libtint_lang_core_intrinsic.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_inspector.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_program.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_sem.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_ast.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer_printer.a ../dawn/out/Release/src/tint/libtint_utils_generator.a ../dawn/out/Release/src/tint/libtint_lang_core_ir.a ../dawn/out/Release/src/tint/libtint_lang_core_constant.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer_common.a ../dawn/out/Release/src/tint/libtint_api_options.a ../dawn/out/Release/src/tint/libtint_api_common.a ../dawn/out/Release/src/tint/libtint_lang_core_type.a ../dawn/out/Release/src/tint/libtint_lang_core.a ../dawn/out/Release/src/tint/libtint_utils_diagnostic.a ../dawn/out/Release/src/tint/libtint_utils_reflection.a ../dawn/out/Release/src/tint/libtint_utils_symbol.a ../dawn/out/Release/src/tint/libtint_utils_id.a ../dawn/out/Release/src/tint/libtint_utils_strconv.a ../dawn/out/Release/src/tint/libtint_utils_result.a ../dawn/out/Release/src/tint/libtint_utils_text.a ../dawn/out/Release/src/tint/libtint_utils_containers.a ../dawn/out/Release/src/tint/libtint_utils_ice.a ../dawn/out/Release/src/tint/libtint_utils_debug.a ../dawn/out/Release/src/tint/libtint_utils_rtti.a ../dawn/out/Release/src/tint/libtint_utils_macros.a ../dawn/out/Release/src/tint/libtint_utils_memory.a ../dawn/out/Release/src/tint/libtint_utils_math.a ../dawn/out/Release/src/tint/libtint_utils_traits.a -L ../dawn/out/Release/third_party/abseil/absl/strings -l absl_str_format_internal -l absl_strings -l absl_strings_internal -L ../dawn/out/Release/third_party/abseil/absl/base -l absl_base -l absl_spinlock_wait -l absl_throw_delegate -l absl_raw_logging_internal -l absl_log_severity -L ../dawn/out/Release/third_party/abseil/absl/numeric -l absl_int128 -framework CoreFoundation -framework IOKit -framework IOSurface -framework Metal -framework QuartzCore -framework Cocoa matmul-native.cpp -o matmul-native

server:
	g++ -O2 -std=c++17 -arch arm64 -fno-exceptions -fno-rtti -I ../dawn/out/Release/gen/include -I ../dawn/include/ ../dawn/out/Release/src/dawn/libdawn_proc.a ../dawn/out/Release/src/dawn/libdawncpp.a ../dawn/out/Release/src/dawn/libdawncpp_headers.a ../dawn/out/Release/src/dawn/libdawn_headers.a ../dawn/out/Release/src/dawn/wire/libdawn_wire.a ../dawn/out/Release/src/dawn/common/libdawn_common.a ../dawn/out/Release/src/dawn/native/libdawn_native.a ../dawn/out/Release/src/dawn/platform/libdawn_platform.a ../dawn/out/Release/src/dawn/libdawn_proc.a ../dawn/out/Release/src/tint/libtint_api.a ../dawn/out/Release/src/tint/libtint_lang_hlsl_writer_common.a ../dawn/out/Release/src/tint/libtint_lang_spirv_reader_common.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_reader.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_reader_parser.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_writer.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_writer_ast_printer.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_writer_syntax_tree_printer.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer_raise.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_reader_program_to_ir.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer_ast_printer.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_helpers.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_ast_transform.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_resolver.a ../dawn/out/Release/src/tint/libtint_lang_core_intrinsic_data.a ../dawn/out/Release/src/tint/libtint_lang_core_intrinsic.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_inspector.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_program.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_sem.a ../dawn/out/Release/src/tint/libtint_lang_wgsl_ast.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer_printer.a ../dawn/out/Release/src/tint/libtint_utils_generator.a ../dawn/out/Release/src/tint/libtint_lang_core_ir.a ../dawn/out/Release/src/tint/libtint_lang_core_constant.a ../dawn/out/Release/src/tint/libtint_lang_msl_writer_common.a ../dawn/out/Release/src/tint/libtint_api_options.a ../dawn/out/Release/src/tint/libtint_api_common.a ../dawn/out/Release/src/tint/libtint_lang_core_type.a ../dawn/out/Release/src/tint/libtint_lang_core.a ../dawn/out/Release/src/tint/libtint_utils_diagnostic.a ../dawn/out/Release/src/tint/libtint_utils_reflection.a ../dawn/out/Release/src/tint/libtint_utils_symbol.a ../dawn/out/Release/src/tint/libtint_utils_id.a ../dawn/out/Release/src/tint/libtint_utils_strconv.a ../dawn/out/Release/src/tint/libtint_utils_result.a ../dawn/out/Release/src/tint/libtint_utils_text.a ../dawn/out/Release/src/tint/libtint_utils_containers.a ../dawn/out/Release/src/tint/libtint_utils_ice.a ../dawn/out/Release/src/tint/libtint_utils_debug.a ../dawn/out/Release/src/tint/libtint_utils_rtti.a ../dawn/out/Release/src/tint/libtint_utils_macros.a ../dawn/out/Release/src/tint/libtint_utils_memory.a ../dawn/out/Release/src/tint/libtint_utils_math.a ../dawn/out/Release/src/tint/libtint_utils_traits.a -L ../dawn/out/Release/third_party/abseil/absl/strings -l absl_str_format_internal -l absl_strings -l absl_strings_internal -L ../dawn/out/Release/third_party/abseil/absl/base -l absl_base -l absl_spinlock_wait -l absl_throw_delegate -l absl_raw_logging_internal -l absl_log_severity -L ../dawn/out/Release/third_party/abseil/absl/numeric -l absl_int128 -framework CoreFoundation -framework IOKit -framework IOSurface -framework Metal -framework QuartzCore -framework Cocoa command_buffer.cpp client_tcp.cpp server_tcp.cpp server.cpp -o server

test_client:
	g++ -std=c++17 -arch arm64 -fno-exceptions -fno-rtti -I ../dawn/out/Release/gen/include -I ../dawn/include/ ../dawn/out/Release/src/dawn/wire/libdawn_wire.a command_buffer.cpp client_tcp.cpp test_client.cpp -o client_tcp

test_server:
	g++ -std=c++17 -arch arm64 -fno-exceptions -fno-rtti -I ../dawn/out/Release/gen/include -I ../dawn/include/ ../dawn/out/Release/src/dawn/wire/libdawn_wire.a command_buffer.cpp client_tcp.cpp server_tcp.cpp test_server.cpp -o server_tcp
